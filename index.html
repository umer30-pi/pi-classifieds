<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Style Fitters - Pi Classifieds</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://sdk.minepi.com/pi-sdk.js"></script>
</head>
<body>
  <header>
    <h1>Style Fitters - Pi Classifieds</h1>
    <p>Login with Pi to start listing or promoting goods.</p>
    <button id="pi-login-btn">Login with Pi</button>
  </header>

  <main>
    <div class="product-list">
      <div class="product-card">
        <h2>Used Laptop - Rs 35,000</h2>
        <p>Good condition. Lahore. Photo available on Pi Chat.</p>
        <button>Promote with Pi</button>
      </div>

      <div class="product-card">
        <h2>Secondhand Sofa - Rs 12,000</h2>
        <p>Karachi pickup. Slightly used. Contact via Pi Chat.</p>
        <button>Promote with Pi</button>
      </div>
    </div>
  </main>

  <footer>
    <p>Powered by Pi Network | Style Fitters 2025</p>
  </footer>

  <script>
    // Initialize the Pi SDK
    Pi.init({
      version: "2.0",
      sandbox: false // Set to true only if testing in sandbox mode
    });

    document.getElementById("pi-login-btn").addEventListener("click", async () => {
      if (!window.Pi) {
        alert("Pi SDK not loaded. Please open this site in the Pi Browser.");
        return;
      }

      try {
        const scopes = ['username', 'payments'];
        const authResult = await Pi.authenticate(scopes, onIncompletePaymentFound);
        alert("Welcome, " + authResult.user.username);
        console.log(authResult);
      } catch (err) {
        console.error("Pi authentication failed:", err);
        alert("Login failed. Please try again.");
      }
    });

    function onIncompletePaymentFound(payment) {
      console.log("Incomplete payment found", payment);
    }
  </script>
</body>
</html>  <script>
    document.getElementById("pi-login-btn").addEventListener("click", async () => {
      if (!window.Pi) {
        alert("Pi SDK not loaded. Please open this site in the Pi Browser.");
        return;
      }

      try {
        const scopes = ['username', 'payments'];
        const authResult = await Pi.authenticate(scopes, onIncompletePaymentFound);
        alert("Welcome, " + authResult.user.username);
        console.log(authResult);
      } catch (err) {
        console.error("Pi authentication failed:", err);
        alert("Login failed. Please try again.");
      }
    });

    function onIncompletePaymentFound(payment) {
      console.log("Incomplete payment found", payment);
    }
  </script>
</body>
</html>
